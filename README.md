# Solo Leveling — Minimalist TODO RPG

Минималистичное desktop TODO‑приложение с RPG‑прокачкой.
**Главный прогресс — только от выполнения реальных задач.**
Бои — это испытание навыков и визуализация силы, **EXP за бои запрещён**.

## Ключевые правила

- EXP начисляется **только** за задания/данжи.
- Бои **не дают EXP** и не предназначены для фарма.
- Основная боевая механика — **Tactical Memory**.
- Боссы — **мультифазные**: Tactical Memory + Pressure Puzzle.
- Награды за бои: титулы, косметика, открытие следующих врагов/этажей.
- Минимализм важнее количества фич.

## Стек и требования

- Go 1.21+
- Fyne (GUI)
- SQLite (через CGO)
- Сборка: Windows / macOS / Linux

## Запуск

```bash
cd "путь/к/проекту"

go mod tidy
CGO_ENABLED=1 go run .
```

## Архитектура (после рефакторинга)

```
.
├── main.go
├── internal/
│   ├── config/
│   │   └── features.go              # Feature flags (MinimalMode и т.д.)
│   ├── models/
│   │   └── models.go                 # Все модели данных
│   ├── database/
│   │   ├── schema.go                 # Миграции
│   │   ├── quests.go                 # Квесты, daily, данжи
│   │   ├── stats.go                  # Статы, статистика, daily activity
│   │   └── combat.go                 # Враги, бои
│   ├── game/
│   │   ├── engine.go                 # Общие сервисы и оркестрация
│   │   ├── quests.go                 # Логика квестов
│   │   ├── stats.go                  # Статы/статистика
│   │   ├── skills.go                 # Скиллы и мультипликаторы
│   │   ├── dungeons_flow.go          # Данжи
│   │   ├── boss.go                   # Интеграция босс‑боёв
│   │   └── combat/
│   │       ├── memory/               # Tactical Memory
│   │       └── boss/                 # Босс‑механика (2 фазы)
│   └── ui/
│       ├── app.go                    # Общий UI + бои
│       ├── theme.go                  # Тема
│       ├── components/               # Общие виджеты/цвета
│       └── tabs/                     # Вкладки (Today, Quests, Progress, Dungeons)
```

## Feature Flags

`internal/config/features.go`

```go
type Features struct {
  MinimalMode bool
  Combat      bool
  Events      bool
}
```

Дефолты:
- `MinimalMode = true`
- `Combat = true`
- `Events = false`

В MinimalMode видны только ключевые вкладки: Today / Quests / Progress / Dungeons.
Экономика (гача/крафт/ресурсы) удалена из main.

## Основной прогресс

- Задания дают EXP в выбранный стат.
- Ранги заданий: E, D, C, B, A, S.
- Уровни растут по формуле:
  `ExpForLevel(level) = 50 + (level-1)*30`

## Бои (Tactical Memory)

- Сетка: 3x3 → 6x6
- Длина паттерна: 4 → 9
- Без повторов подряд, всегда валидный маршрут
- Функция сложности учитывает ранг врага и статы игрока.

**Связь статов:**
- INT → больше времени показа / чуть короче паттерн
- AGI → +1 допустимая ошибка
- STR → меньше шагов нужно для урона
- STA → больше HP / устойчивость

**Важно:**
- Бои **не дают EXP**.
- Повторные победы не дают прогресса (только история).

## Боссы (Multi‑phase)

**Фаза 1:** Tactical Memory (усложнённый)
**Фаза 2:** Pressure Puzzle
- Таймер
- Давление со временем
- Ошибки и попытки

**Связь статов:**
- INT → больше времени
- AGI → 1 прощённая ошибка
- STA → больше попыток
- STR → меньше шагов до успеха

Награды босса:
- уникальный титул
- уникальный бейдж
- открытие следующих врагов/этажей

## Что изменено по сравнению с исходной версией

- Введены feature flags и **MinimalMode по умолчанию**.
- Удалена мета‑экономика (ресурсы, гача, крафт, апгрейды).
- Полностью убран EXP из боёв, заменены награды на титулы/бейджи/анлоки.
- Полностью переработана механика боёв на Tactical Memory.
- Добавлены **мультифазные боссы** (Tactical Memory + Pressure Puzzle).
- Рефакторинг проекта по доменам (game/database/ui).

## Последние изменения (очистка до минимализма)

- Удалён экономический цикл (ресурсы, гача, крафт, апгрейды).
- Убраны вкладки и UI, связанные с экономикой и инвентарём.
- Скиллы заморожены: модель остаётся, но UI/переключатели скрыты.
- Бои оставлены как испытание, без EXP и без фарма.

## Тесты

```bash
go test ./...
```
